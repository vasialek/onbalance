@model IEnumerable<OnBalance.Models.Product>
@{
    ViewBag.Title = "Balance";
    Layout = null;
    
    var pendingChanges = new OnBalance.ViewModels.PendingChangesViewModel();
}

<style>
		
	/*margin and padding on body element can introduce errors in determining element position and are not recommended; we turn them off as a foundation for YUI CSS treatments. */
	body {
		margin:0;
		padding:0;
	}

	.yui-skin-sam .yui-dt-col-address pre { font-family:arial;font-size:100%; } /* Use PRE in first col to preserve linebreaks*/

    #example {
        height:30em;
    }

    label {
        display:block;
        float:left;
        width:45%;
        clear:left;
    }

    .clear {
        clear:both;
    }

    #resp {
        margin:10px;
        padding:5px;
        border:1px solid #ccc;
        background:#fff;
    }

    #resp li {
        font-family:monospace
    }

    .yui-pe .yui-pe-content {
        display:none;
    }

</style>
<link rel="stylesheet" type="text/css" href="@Url.Content("~/scripts/yui/build/button/assets/skins/sam/button.css")" />
<link rel="stylesheet" type="text/css" href="@Url.Content("~/scripts/yui/build/container/assets/skins/sam/container.css")" />
<link rel="stylesheet" type="text/css" href="@Url.Content("~/scripts/yui/build/fonts/fonts-min.css")" />
<link rel="stylesheet" type="text/css" href="@Url.Content("~/scripts/yui/build/datatable/assets/skins/sam/datatable.css")">

<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/yahoo-dom-event/yahoo-dom-event.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/calendar/calendar-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/element/element-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/button/button-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/connection/connection-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/datasource/datasource-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/event-delegate/event-delegate-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/datatable/datatable-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/dragdrop/dragdrop-min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/yui/build/container/container-min.js")"></script>

<script src="@Url.Content("~/scripts/balance.js")"></script>

<script type="text/javascript">
    document.documentElement.className = "yui-pe";
</script>


<script type="text/javascript">

    YAHOO.example.Data = {
        products: [
            @foreach(var p in Model)
            {
                @Html.Raw(string.Format("{{ name: \"{0}\", code: \"{1}\", price_minor: '{2}', amount: {3}, price_release_minor: '{4}' }},", p.name, p.uid, 0, 0, 0))
            }
        ]
    };


    YAHOO.namespace("example.container");

    YAHOO.util.Event.onDOMReady(function () {

        // Define various event handlers for Dialog
        var handleSubmit = function() {
            this.submit();
        };
        var handleCancel = function() {
            this.cancel();
        };
        var handleSuccess = function(o) {
            var response = o.responseText;
            response = response.split("<!")[0];
            document.getElementById("resp").innerHTML = response;
        };
        var handleFailure = function(o) {
            alert("Submission failed: " + o.status);
        };

        // Remove progressively enhanced content class, just before creating the module
        YAHOO.util.Dom.removeClass("dialog1", "yui-pe-content");

        // Instantiate the Dialog
        YAHOO.example.container.dialog1 = new YAHOO.widget.Dialog("dialog1",
                { width:"30em",
                    fixedcenter:true,
                    visible:false,
                    constraintoviewport:true,
                    buttons:[
                        { text:"Submit", handler:handleSubmit, isDefault:true },
                        { text:"Cancel", handler:handleCancel }
                    ]
                });

        // Validate the entries in the form to require that both first and last name are entered
        YAHOO.example.container.dialog1.validate = function() {
            var data = this.getData();
            if (data.firstname == "" || data.lastname == "") {
                alert("Please enter your first and last names.");
                return false;
            } else {
                return true;
            }
        };

        // Wire up the success and failure handlers
        YAHOO.example.container.dialog1.callback = {
            success: handleSuccess,
            failure: handleFailure
        };

        // Render the Dialog
        YAHOO.example.container.dialog1.render();

        YAHOO.util.Event.addListener("ShowRemotePending", "click", YAHOO.example.container.dialog1.show, YAHOO.example.container.dialog1, true);
        YAHOO.util.Event.addListener("hide", "click", YAHOO.example.container.dialog1.hide, YAHOO.example.container.dialog1, true);
    });


</script>

<body class="yui-skin-sam">
    <div class="balance_status_panel">
        @Html.DisplayFor(x => pendingChanges)
        @*<label>Local pending changes to be synced with remote: </label>
        <label id="BalanceLocalPending">Synchronized</label>*@
    </div>

	<div id="MainBalanceDiv"></div>

    <div id="dialog1" class="yui-pe-content">
        <div class="hd">Please review pending changes to confirm them</div>
        <div class="bd">
            <form method="POST" action="/home/test">
                <div id="PendingChangesDiv">

                </div>
                <label>REE 153Lt, 3pcs</label><input type="checkbox" name="p[]" value="1" />
                <div class="clear"/>
                <!--<label>REE 153Lt, 3pcs</label><input type="checkbox" name="p[]" value="1" />-->
                <!--<div class="clear"/>-->
                <!--<label>REE 153Lt, 3pcs</label><input type="checkbox" name="p[]" value="1" />-->
                <!--<div class="clear"/>-->
                <!--<label>REE 153Lt, 3pcs</label><input type="checkbox" name="p[]" value="1" />-->
                <div class="clear"/>

            </form>
        </div>
    </div>

</body>


